{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Perovic/Desktop/PIA/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../services/restoran.service\";\nconst _c0 = [\"canvas\"];\nexport class LayoutComponent {\n  constructor(http, restoranService) {\n    this.http = http;\n    this.restoranService = restoranService;\n    this.restoran = null;\n    this.stolovi = [];\n    this.rezervacija = null;\n  }\n  ngOnInit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      try {\n        let rez = localStorage.getItem('rezervacija');\n        if (rez != null) _this.rezervacija = JSON.parse(rez);\n        _this.restoranService.layout().subscribe(rez => {\n          _this.restoran = rez.restoran;\n          _this.stolovi = rez.stolovi;\n          _this.ctx = _this.canvas.nativeElement.getContext('2d');\n          _this.drawLayout(_this.restoran, _this.stolovi);\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    })();\n  }\n  drawLayout(restoran, stolovi) {\n    this.ctx.clearRect(0, 0, this.canvas.nativeElement.width, this.canvas.nativeElement.height);\n    stolovi.forEach(table => {\n      const radius = 25;\n      const centerX = table.x + radius;\n      const centerY = table.y + radius;\n      this.ctx.beginPath();\n      this.ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);\n      this.ctx.fillStyle = 'yellow';\n      this.ctx.fill();\n      this.ctx.closePath();\n      this.ctx.fillStyle = 'black';\n      this.ctx.fillText(`Table ${table.id}`, centerX - 15, centerY);\n    });\n    this.ctx.fillStyle = 'red';\n    this.ctx.fillRect(restoran.kitchen.x, restoran.kitchen.y, 75, 200);\n    this.ctx.fillStyle = 'black';\n    this.ctx.fillText('Kitchen', restoran.kitchen.x, restoran.kitchen.y);\n    this.ctx.fillStyle = 'blue';\n    this.ctx.fillRect(restoran.toilets.x, restoran.toilets.y, 75, 75);\n    this.ctx.fillStyle = 'black';\n    this.ctx.fillText('Toilets', restoran.toilets.x, restoran.toilets.y);\n  }\n  static #_ = this.ɵfac = function LayoutComponent_Factory(t) {\n    return new (t || LayoutComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.RestoranService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LayoutComponent,\n    selectors: [[\"app-layout\"]],\n    viewQuery: function LayoutComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 7);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.canvas = _t.first);\n      }\n    },\n    inputs: {\n      layoutData: \"layoutData\"\n    },\n    decls: 3,\n    vars: 0,\n    consts: [[1, \"canvas-container\"], [\"width\", \"600\", \"height\", \"500\"], [\"canvas\", \"\"]],\n    template: function LayoutComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelement(1, \"canvas\", 1, 2);\n        i0.ɵɵelementEnd();\n      }\n    },\n    styles: [\".canvas-container[_ngcontent-%COMP%] {\\n    width: 600px; \\n    height: 500px; \\n    border: 2px solid black; \\n    display: inline-block; \\n}\\n\\ncanvas[_ngcontent-%COMP%] {\\n    display: block; \\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbGF5b3V0L2xheW91dC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksWUFBWTtJQUNaLGFBQWE7SUFDYix1QkFBdUI7SUFDdkIscUJBQXFCO0FBQ3pCOztBQUVBO0lBQ0ksY0FBYztBQUNsQiIsInNvdXJjZXNDb250ZW50IjpbIi5jYW52YXMtY29udGFpbmVyIHtcclxuICAgIHdpZHRoOiA2MDBweDsgXHJcbiAgICBoZWlnaHQ6IDUwMHB4OyBcclxuICAgIGJvcmRlcjogMnB4IHNvbGlkIGJsYWNrOyBcclxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsgXHJcbn1cclxuXHJcbmNhbnZhcyB7XHJcbiAgICBkaXNwbGF5OiBibG9jazsgXHJcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n  });\n}","map":{"version":3,"names":["LayoutComponent","constructor","http","restoranService","restoran","stolovi","rezervacija","ngOnInit","_this","_asyncToGenerator","rez","localStorage","getItem","JSON","parse","layout","subscribe","ctx","canvas","nativeElement","getContext","drawLayout","error","console","log","clearRect","width","height","forEach","table","radius","centerX","x","centerY","y","beginPath","arc","Math","PI","fillStyle","fill","closePath","fillText","id","fillRect","kitchen","toilets","_","i0","ɵɵdirectiveInject","i1","HttpClient","i2","RestoranService","_2","selectors","viewQuery","LayoutComponent_Query","rf","ɵɵelementStart","ɵɵelement","ɵɵelementEnd"],"sources":["C:\\Users\\Perovic\\Desktop\\PIA\\front\\src\\app\\layout\\layout.component.ts","C:\\Users\\Perovic\\Desktop\\PIA\\front\\src\\app\\layout\\layout.component.html"],"sourcesContent":["import { Component, Input, OnInit, ViewChild, ElementRef } from '@angular/core';\nimport { LayoutResponse } from '../models/LayoutResponse';\nimport { HttpClient } from '@angular/common/http';\nimport { RestoranService } from '../services/restoran.service';\nimport { restoran } from '../models/restoran';\nimport { sto } from '../models/sto';\nimport { rezervacija } from '../models/rezervacija';\n\n@Component({\n  selector: 'app-layout',\n  templateUrl: './layout.component.html',\n  styleUrls: ['./layout.component.css']\n})\nexport class LayoutComponent implements OnInit {\n  \n  @Input() layoutData: any; \n  @ViewChild('canvas', { static: true }) canvas: ElementRef<HTMLCanvasElement>;\n  private ctx: CanvasRenderingContext2D;\n  restoran: restoran = null;\n  stolovi: sto[] = [];\n  rezervacija: rezervacija = null;\n\n  constructor(private http: HttpClient, private restoranService: RestoranService) {}\n\n  \n  async ngOnInit(){\n    try{\n      let rez = localStorage.getItem('rezervacija')\n      if(rez != null) this.rezervacija = JSON.parse(rez);\n\n      this.restoranService.layout().subscribe((rez: any)=>{\n        this.restoran = rez.restoran;\n        this.stolovi = rez.stolovi;\n        this.ctx = this.canvas.nativeElement.getContext('2d');\n        this.drawLayout(this.restoran, this.stolovi);\n      })\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  private drawLayout(restoran: restoran, stolovi: sto[]): void {\n    this.ctx.clearRect(0, 0, this.canvas.nativeElement.width, this.canvas.nativeElement.height);\n\n    stolovi.forEach(table => {\n      const radius = 25; \n      const centerX = table.x + radius;\n      const centerY = table.y + radius;\n  \n      this.ctx.beginPath();\n      this.ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);\n      this.ctx.fillStyle = 'yellow';\n      this.ctx.fill();\n      this.ctx.closePath();\n  \n      this.ctx.fillStyle = 'black';\n      this.ctx.fillText(`Table ${table.id}`, centerX - 15, centerY);\n    });\n\n    this.ctx.fillStyle = 'red';\n    this.ctx.fillRect(restoran.kitchen.x, restoran.kitchen.y, 75, 200);\n    this.ctx.fillStyle = 'black';\n    this.ctx.fillText('Kitchen', restoran.kitchen.x, restoran.kitchen.y);\n\n    this.ctx.fillStyle = 'blue';\n    this.ctx.fillRect(restoran.toilets.x, restoran.toilets.y, 75, 75);\n    this.ctx.fillStyle = 'black';\n    this.ctx.fillText('Toilets', restoran.toilets.x, restoran.toilets.y);\n  }\n}\n","<div class=\"canvas-container\">\n    <canvas #canvas width=\"600\" height=\"500\"></canvas>\n</div>"],"mappings":";;;;;AAaA,OAAM,MAAOA,eAAe;EAS1BC,YAAoBC,IAAgB,EAAUC,eAAgC;IAA1D,KAAAD,IAAI,GAAJA,IAAI;IAAsB,KAAAC,eAAe,GAAfA,eAAe;IAJ7D,KAAAC,QAAQ,GAAa,IAAI;IACzB,KAAAC,OAAO,GAAU,EAAE;IACnB,KAAAC,WAAW,GAAgB,IAAI;EAEkD;EAG3EC,QAAQA,CAAA;IAAA,IAAAC,KAAA;IAAA,OAAAC,iBAAA;MACZ,IAAG;QACD,IAAIC,GAAG,GAAGC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC;QAC7C,IAAGF,GAAG,IAAI,IAAI,EAAEF,KAAI,CAACF,WAAW,GAAGO,IAAI,CAACC,KAAK,CAACJ,GAAG,CAAC;QAElDF,KAAI,CAACL,eAAe,CAACY,MAAM,EAAE,CAACC,SAAS,CAAEN,GAAQ,IAAG;UAClDF,KAAI,CAACJ,QAAQ,GAAGM,GAAG,CAACN,QAAQ;UAC5BI,KAAI,CAACH,OAAO,GAAGK,GAAG,CAACL,OAAO;UAC1BG,KAAI,CAACS,GAAG,GAAGT,KAAI,CAACU,MAAM,CAACC,aAAa,CAACC,UAAU,CAAC,IAAI,CAAC;UACrDZ,KAAI,CAACa,UAAU,CAACb,KAAI,CAACJ,QAAQ,EAAEI,KAAI,CAACH,OAAO,CAAC;QAC9C,CAAC,CAAC;OACH,CAAC,OAAOiB,KAAK,EAAE;QACdC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;;IACnB;EACH;EAEQD,UAAUA,CAACjB,QAAkB,EAAEC,OAAc;IACnD,IAAI,CAACY,GAAG,CAACQ,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAACP,MAAM,CAACC,aAAa,CAACO,KAAK,EAAE,IAAI,CAACR,MAAM,CAACC,aAAa,CAACQ,MAAM,CAAC;IAE3FtB,OAAO,CAACuB,OAAO,CAACC,KAAK,IAAG;MACtB,MAAMC,MAAM,GAAG,EAAE;MACjB,MAAMC,OAAO,GAAGF,KAAK,CAACG,CAAC,GAAGF,MAAM;MAChC,MAAMG,OAAO,GAAGJ,KAAK,CAACK,CAAC,GAAGJ,MAAM;MAEhC,IAAI,CAACb,GAAG,CAACkB,SAAS,EAAE;MACpB,IAAI,CAAClB,GAAG,CAACmB,GAAG,CAACL,OAAO,EAAEE,OAAO,EAAEH,MAAM,EAAE,CAAC,EAAE,CAAC,GAAGO,IAAI,CAACC,EAAE,CAAC;MACtD,IAAI,CAACrB,GAAG,CAACsB,SAAS,GAAG,QAAQ;MAC7B,IAAI,CAACtB,GAAG,CAACuB,IAAI,EAAE;MACf,IAAI,CAACvB,GAAG,CAACwB,SAAS,EAAE;MAEpB,IAAI,CAACxB,GAAG,CAACsB,SAAS,GAAG,OAAO;MAC5B,IAAI,CAACtB,GAAG,CAACyB,QAAQ,CAAC,SAASb,KAAK,CAACc,EAAE,EAAE,EAAEZ,OAAO,GAAG,EAAE,EAAEE,OAAO,CAAC;IAC/D,CAAC,CAAC;IAEF,IAAI,CAAChB,GAAG,CAACsB,SAAS,GAAG,KAAK;IAC1B,IAAI,CAACtB,GAAG,CAAC2B,QAAQ,CAACxC,QAAQ,CAACyC,OAAO,CAACb,CAAC,EAAE5B,QAAQ,CAACyC,OAAO,CAACX,CAAC,EAAE,EAAE,EAAE,GAAG,CAAC;IAClE,IAAI,CAACjB,GAAG,CAACsB,SAAS,GAAG,OAAO;IAC5B,IAAI,CAACtB,GAAG,CAACyB,QAAQ,CAAC,SAAS,EAAEtC,QAAQ,CAACyC,OAAO,CAACb,CAAC,EAAE5B,QAAQ,CAACyC,OAAO,CAACX,CAAC,CAAC;IAEpE,IAAI,CAACjB,GAAG,CAACsB,SAAS,GAAG,MAAM;IAC3B,IAAI,CAACtB,GAAG,CAAC2B,QAAQ,CAACxC,QAAQ,CAAC0C,OAAO,CAACd,CAAC,EAAE5B,QAAQ,CAAC0C,OAAO,CAACZ,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC;IACjE,IAAI,CAACjB,GAAG,CAACsB,SAAS,GAAG,OAAO;IAC5B,IAAI,CAACtB,GAAG,CAACyB,QAAQ,CAAC,SAAS,EAAEtC,QAAQ,CAAC0C,OAAO,CAACd,CAAC,EAAE5B,QAAQ,CAAC0C,OAAO,CAACZ,CAAC,CAAC;EACtE;EAAC,QAAAa,CAAA,G;qBAvDU/C,eAAe,EAAAgD,EAAA,CAAAC,iBAAA,CAAAC,EAAA,CAAAC,UAAA,GAAAH,EAAA,CAAAC,iBAAA,CAAAG,EAAA,CAAAC,eAAA;EAAA;EAAA,QAAAC,EAAA,G;UAAftD,eAAe;IAAAuD,SAAA;IAAAC,SAAA,WAAAC,sBAAAC,EAAA,EAAAzC,GAAA;MAAA,IAAAyC,EAAA;;;;;;;;;;;;;;;;QCb5BV,EAAA,CAAAW,cAAA,aAA8B;QAC1BX,EAAA,CAAAY,SAAA,mBAAkD;QACtDZ,EAAA,CAAAa,YAAA,EAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}