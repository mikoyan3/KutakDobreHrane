{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Perovic/Desktop/PIA/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { lastValueFrom } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../services/restoran.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nconst _c0 = [\"canvas\"];\nfunction LayoutComponent_option_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 13);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const sto_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", sto_r2.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\"Sto: \", sto_r2.id, \", broj mesta za stolom: \", sto_r2.brojMesta, \"\");\n  }\n}\nexport class LayoutComponent {\n  constructor(http, restoranService) {\n    this.http = http;\n    this.restoranService = restoranService;\n    this.restoran = null;\n    this.zauzetiStolovi = [];\n    this.slobodniStolovi = [];\n    this.rezervacija = null;\n    this.odgovarajuciStolovi = [];\n    this.selectedStoId = -1;\n    this.message = \"\";\n    this.success = \"\";\n  }\n  ngOnInit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      try {\n        _this.success = \"\";\n        _this.selectedStoId = -1;\n        _this.message = \"\";\n        let rez = localStorage.getItem('rezervacija');\n        if (rez != null) _this.rezervacija = JSON.parse(rez);\n        let rezultat = yield lastValueFrom(_this.restoranService.getLayoutForRestoran(_this.rezervacija));\n        _this.restoran = rezultat.restoran;\n        _this.zauzetiStolovi = rezultat.zauzetiStolovi;\n        _this.slobodniStolovi = rezultat.slobodniStolovi;\n        _this.slobodniStolovi.forEach(sto => {\n          if (sto.brojMesta >= _this.rezervacija.brojGostiju) {\n            _this.odgovarajuciStolovi.push(sto);\n          }\n        });\n        _this.ctx = _this.canvas.nativeElement.getContext('2d');\n        _this.drawLayout(_this.restoran, _this.slobodniStolovi, _this.zauzetiStolovi);\n      } catch (error) {\n        console.log(error);\n      }\n    })();\n  }\n  drawLayout(restoran, slobodniStolovi, zauzetiStolovi) {\n    this.ctx.clearRect(0, 0, this.canvas.nativeElement.width, this.canvas.nativeElement.height);\n    const canvasWidth = this.canvas.nativeElement.width;\n    const canvasHeight = this.canvas.nativeElement.height;\n    const radius = 25;\n    const kitchenWidth = 75;\n    const kitchenHeight = 200;\n    const toiletWidth = 75;\n    const toiletHeight = 75;\n    // Trazimo da li postoji element van kanvasa tako sto nadjemo minimum i maksimum X i Y koordinate\n    let minX = Math.min(...slobodniStolovi.map(table => table.x), ...zauzetiStolovi.map(table => table.x), restoran.kitchen.x, restoran.toilets.x);\n    let minY = Math.min(...slobodniStolovi.map(table => table.y), ...zauzetiStolovi.map(table => table.y), restoran.kitchen.y, restoran.toilets.y);\n    let maxX = Math.max(...slobodniStolovi.map(table => table.x + radius * 2), ...zauzetiStolovi.map(table => table.x + radius * 2), restoran.kitchen.x + kitchenWidth, restoran.toilets.x + toiletWidth);\n    let maxY = Math.max(...slobodniStolovi.map(table => table.y + radius * 2), ...zauzetiStolovi.map(table => table.y + radius * 2), restoran.kitchen.y + kitchenHeight, restoran.toilets.y + toiletHeight);\n    let shiftX = 0;\n    let shiftY = 0;\n    if (minX < 0) {\n      // Ukoliko je minimum X van kanvasa, pomeramo ga za minX u desno\n      shiftX = -minX;\n    } else if (maxX > canvasWidth) {\n      // ukoliko je maximum X van kanvasa, pomeramo ga za razdaljinu ivice kanvasa do maximum X u levo\n      shiftX = canvasWidth - maxX;\n    }\n    if (minY < 0) {\n      // ukoliko je minimum Y van kanvasa, pomeramo ga za minY na gore\n      shiftY = -minY;\n    } else if (maxY > canvasHeight) {\n      // ukoliko je maximum Y van kanvasa, pomeramo ga za razdaljinu ivice kanvasa do maximum Y na dole\n      shiftY = canvasHeight - maxY;\n    }\n    const adjustPosition = (x, y) => {\n      return {\n        x: x + shiftX,\n        y: y + shiftY\n      };\n    };\n    slobodniStolovi.forEach(table => {\n      let {\n        x,\n        y\n      } = adjustPosition(table.x, table.y); // ako je potrebno podesavanje, pomerimo sve\n      const centerX = x + radius;\n      const centerY = y + radius;\n      this.ctx.beginPath();\n      this.ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);\n      this.ctx.fillStyle = 'white';\n      this.ctx.fill();\n      this.ctx.strokeStyle = 'black';\n      this.ctx.lineWidth = 2;\n      this.ctx.stroke();\n      this.ctx.closePath();\n      this.ctx.fillStyle = 'black';\n      this.ctx.textAlign = 'center';\n      this.ctx.textBaseline = 'middle';\n      this.ctx.fillText(`Table ${table.id}`, centerX, centerY);\n    });\n    zauzetiStolovi.forEach(table => {\n      let {\n        x,\n        y\n      } = adjustPosition(table.x, table.y); // ako je potrebno podesavanje, podesimo sve\n      const centerX = x + radius;\n      const centerY = y + radius;\n      this.ctx.beginPath();\n      this.ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);\n      this.ctx.fillStyle = 'red';\n      this.ctx.fill();\n      this.ctx.strokeStyle = 'black';\n      this.ctx.lineWidth = 2;\n      this.ctx.stroke();\n      this.ctx.closePath();\n      this.ctx.fillStyle = 'black';\n      this.ctx.textAlign = 'center';\n      this.ctx.textBaseline = 'middle';\n      this.ctx.fillText(`Table ${table.id}`, centerX, centerY);\n    });\n    let kitchenPos = adjustPosition(restoran.kitchen.x, restoran.kitchen.y); // ako je potrebno podesavanje, podesimo kuhinju\n    this.ctx.fillStyle = 'white';\n    this.ctx.fillRect(kitchenPos.x, kitchenPos.y, kitchenWidth, kitchenHeight);\n    this.ctx.strokeStyle = 'black';\n    this.ctx.lineWidth = 2;\n    this.ctx.strokeRect(kitchenPos.x, kitchenPos.y, kitchenWidth, kitchenHeight);\n    this.ctx.fillStyle = 'black';\n    this.ctx.textAlign = 'start';\n    this.ctx.textBaseline = 'top';\n    this.ctx.fillText('Kuhinja', kitchenPos.x + 5, kitchenPos.y + 5);\n    let toiletPos = adjustPosition(restoran.toilets.x, restoran.toilets.y); // ako je potrebno podesavanje, podesimo toalet\n    this.ctx.fillStyle = 'white';\n    this.ctx.fillRect(toiletPos.x, toiletPos.y, toiletWidth, toiletHeight);\n    this.ctx.strokeStyle = 'black';\n    this.ctx.lineWidth = 2;\n    this.ctx.strokeRect(toiletPos.x, toiletPos.y, toiletWidth, toiletHeight);\n    this.ctx.fillStyle = 'black';\n    this.ctx.textAlign = 'start';\n    this.ctx.textBaseline = 'top';\n    this.ctx.fillText('Toalet', toiletPos.x + 5, toiletPos.y + 5);\n  }\n  potvrdiRezervaciju() {\n    if (this.selectedStoId == -1) {\n      this.message = \"Niste odabrali sto!\";\n    } else {\n      this.message = \"\";\n    }\n  }\n  static #_ = this.ɵfac = function LayoutComponent_Factory(t) {\n    return new (t || LayoutComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.RestoranService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LayoutComponent,\n    selectors: [[\"app-layout\"]],\n    viewQuery: function LayoutComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 7);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.canvas = _t.first);\n      }\n    },\n    inputs: {\n      layoutData: \"layoutData\"\n    },\n    decls: 22,\n    vars: 5,\n    consts: [[1, \"container\"], [1, \"layout-container\"], [1, \"canvas-container\"], [\"width\", \"600\", \"height\", \"500\"], [\"canvas\", \"\"], [1, \"reservation-form\"], [1, \"input-field\"], [\"for\", \"sto\"], [\"id\", \"sto\", 3, \"ngModel\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"buttons\"], [3, \"click\"], [2, \"color\", \"red\"], [3, \"value\"]],\n    template: function LayoutComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2);\n        i0.ɵɵelement(3, \"canvas\", 3, 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 5)(6, \"h2\");\n        i0.ɵɵtext(7, \"Informacije o rezervaciji\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"p\");\n        i0.ɵɵtext(9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"p\");\n        i0.ɵɵtext(11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"div\", 6)(13, \"label\", 7);\n        i0.ɵɵtext(14, \"Odaberite sto:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"select\", 8);\n        i0.ɵɵlistener(\"ngModelChange\", function LayoutComponent_Template_select_ngModelChange_15_listener($event) {\n          return ctx.selectedStoId = $event;\n        });\n        i0.ɵɵtemplate(16, LayoutComponent_option_16_Template, 2, 3, \"option\", 9);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(17, \"div\", 10)(18, \"button\", 11);\n        i0.ɵɵlistener(\"click\", function LayoutComponent_Template_button_click_18_listener() {\n          return ctx.potvrdiRezervaciju();\n        });\n        i0.ɵɵtext(19, \"Potvrdi\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"span\", 12);\n        i0.ɵɵtext(21);\n        i0.ɵɵelementEnd()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(9);\n        i0.ɵɵtextInterpolate1(\"Gost: \", ctx.rezervacija.gost, \"\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"Broj gostiju: \", ctx.rezervacija.brojGostiju, \"\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.selectedStoId);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.odgovarajuciStolovi);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(ctx.message);\n      }\n    },\n    dependencies: [i3.NgForOf, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgModel],\n    styles: [\".canvas-container[_ngcontent-%COMP%] {\\n    width: 600px; \\n    height: 500px; \\n    border: 2px solid black; \\n    display: inline-block; \\n}\\n\\ncanvas[_ngcontent-%COMP%] {\\n    display: block; \\n}\\n\\nbody[_ngcontent-%COMP%] {\\n    font-family: Arial, sans-serif;\\n    background-color: #f4f4f4;\\n    margin: 0;\\n    padding: 0;\\n}\\n  \\n.container[_ngcontent-%COMP%] {\\n    width: 80%;\\n    margin: auto;\\n    overflow: hidden;\\n    background-color: #f7f7f7; \\n    padding: 20px; \\n    border-radius: 8px;\\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\\n}\\n  \\n.layout-container[_ngcontent-%COMP%] {\\n    display: flex;\\n    justify-content: space-between;\\n}\\n  \\n.canvas-container[_ngcontent-%COMP%] {\\n    flex: 2;\\n}\\n  \\n.reservation-form[_ngcontent-%COMP%] {\\n    flex: 1;\\n    margin-left: 20px;\\n    background-color: #fff;\\n    padding: 20px;\\n    border-radius: 8px;\\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\\n}\\n  \\n.reservation-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\\n    border-bottom: 2px solid #8561a8;\\n    padding-bottom: 5px;\\n    color: #8561a8;\\n}\\n  \\n.input-field[_ngcontent-%COMP%] {\\n    margin-bottom: 15px;\\n}\\n  \\n.input-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\\n    display: block;\\n    margin-bottom: 5px;\\n    font-weight: bold;\\n    color: #333;\\n}\\n  \\n.input-field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%] {\\n    width: calc(100% - 10px);\\n    padding: 10px;\\n    border: 1px solid #ccc;\\n    border-radius: 4px;\\n    box-sizing: border-box;\\n}\\n  \\n.buttons[_ngcontent-%COMP%] {\\n    text-align: center;\\n    margin-top: 10px;\\n}\\n  \\n.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n    background: #8561a8;\\n    color: white;\\n    border: none;\\n    padding: 10px 20px;\\n    cursor: pointer;\\n    margin: 5px;\\n    border-radius: 4px; \\n}\\n  \\n.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover {\\n    background: #64427a; \\n}\\n  \\n@media only screen and (max-width: 768px) {\\n    .container[_ngcontent-%COMP%] {\\n      width: 90%;\\n    }\\n  \\n    .layout-container[_ngcontent-%COMP%] {\\n      flex-direction: column;\\n    }\\n  \\n    .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n      padding: 8px 16px;\\n    }\\n  \\n    .canvas-container[_ngcontent-%COMP%], .reservation-form[_ngcontent-%COMP%] {\\n      margin: 0;\\n    }\\n  \\n    .reservation-form[_ngcontent-%COMP%] {\\n      margin-top: 20px;\\n    }\\n}\\n  \\n@media only screen and (max-width: 576px) {\\n    .container[_ngcontent-%COMP%] {\\n      padding: 15px;\\n    }\\n  \\n    .buttons[_ngcontent-%COMP%] {\\n      display: flex;\\n      flex-wrap: wrap;\\n      justify-content: center;\\n    }\\n  \\n    .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n      margin: 5px;\\n    }\\n}\\n  \\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbGF5b3V0L2xheW91dC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksWUFBWTtJQUNaLGFBQWE7SUFDYix1QkFBdUI7SUFDdkIscUJBQXFCO0FBQ3pCOztBQUVBO0lBQ0ksY0FBYztBQUNsQjs7QUFFQTtJQUNJLDhCQUE4QjtJQUM5Qix5QkFBeUI7SUFDekIsU0FBUztJQUNULFVBQVU7QUFDZDs7QUFFQTtJQUNJLFVBQVU7SUFDVixZQUFZO0lBQ1osZ0JBQWdCO0lBQ2hCLHlCQUF5QjtJQUN6QixhQUFhO0lBQ2Isa0JBQWtCO0lBQ2xCLHVDQUF1QztBQUMzQzs7QUFFQTtJQUNJLGFBQWE7SUFDYiw4QkFBOEI7QUFDbEM7O0FBRUE7SUFDSSxPQUFPO0FBQ1g7O0FBRUE7SUFDSSxPQUFPO0lBQ1AsaUJBQWlCO0lBQ2pCLHNCQUFzQjtJQUN0QixhQUFhO0lBQ2Isa0JBQWtCO0lBQ2xCLHVDQUF1QztBQUMzQzs7QUFFQTtJQUNJLGdDQUFnQztJQUNoQyxtQkFBbUI7SUFDbkIsY0FBYztBQUNsQjs7QUFFQTtJQUNJLG1CQUFtQjtBQUN2Qjs7QUFFQTtJQUNJLGNBQWM7SUFDZCxrQkFBa0I7SUFDbEIsaUJBQWlCO0lBQ2pCLFdBQVc7QUFDZjs7QUFFQTtJQUNJLHdCQUF3QjtJQUN4QixhQUFhO0lBQ2Isc0JBQXNCO0lBQ3RCLGtCQUFrQjtJQUNsQixzQkFBc0I7QUFDMUI7O0FBRUE7SUFDSSxrQkFBa0I7SUFDbEIsZ0JBQWdCO0FBQ3BCOztBQUVBO0lBQ0ksbUJBQW1CO0lBQ25CLFlBQVk7SUFDWixZQUFZO0lBQ1osa0JBQWtCO0lBQ2xCLGVBQWU7SUFDZixXQUFXO0lBQ1gsa0JBQWtCO0FBQ3RCOztBQUVBO0lBQ0ksbUJBQW1CO0FBQ3ZCOztBQUVBO0lBQ0k7TUFDRSxVQUFVO0lBQ1o7O0lBRUE7TUFDRSxzQkFBc0I7SUFDeEI7O0lBRUE7TUFDRSxpQkFBaUI7SUFDbkI7O0lBRUE7O01BRUUsU0FBUztJQUNYOztJQUVBO01BQ0UsZ0JBQWdCO0lBQ2xCO0FBQ0o7O0FBRUE7SUFDSTtNQUNFLGFBQWE7SUFDZjs7SUFFQTtNQUNFLGFBQWE7TUFDYixlQUFlO01BQ2YsdUJBQXVCO0lBQ3pCOztJQUVBO01BQ0UsV0FBVztJQUNiO0FBQ0oiLCJzb3VyY2VzQ29udGVudCI6WyIuY2FudmFzLWNvbnRhaW5lciB7XHJcbiAgICB3aWR0aDogNjAwcHg7IFxyXG4gICAgaGVpZ2h0OiA1MDBweDsgXHJcbiAgICBib3JkZXI6IDJweCBzb2xpZCBibGFjazsgXHJcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IFxyXG59XHJcblxyXG5jYW52YXMge1xyXG4gICAgZGlzcGxheTogYmxvY2s7IFxyXG59XHJcblxyXG5ib2R5IHtcclxuICAgIGZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNmNGY0ZjQ7XHJcbiAgICBtYXJnaW46IDA7XHJcbiAgICBwYWRkaW5nOiAwO1xyXG59XHJcbiAgXHJcbi5jb250YWluZXIge1xyXG4gICAgd2lkdGg6IDgwJTtcclxuICAgIG1hcmdpbjogYXV0bztcclxuICAgIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjdmN2Y3OyBcclxuICAgIHBhZGRpbmc6IDIwcHg7IFxyXG4gICAgYm9yZGVyLXJhZGl1czogOHB4O1xyXG4gICAgYm94LXNoYWRvdzogMCAwIDEwcHggcmdiYSgwLCAwLCAwLCAwLjEpO1xyXG59XHJcbiAgXHJcbi5sYXlvdXQtY29udGFpbmVyIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbn1cclxuICBcclxuLmNhbnZhcy1jb250YWluZXIge1xyXG4gICAgZmxleDogMjtcclxufVxyXG4gIFxyXG4ucmVzZXJ2YXRpb24tZm9ybSB7XHJcbiAgICBmbGV4OiAxO1xyXG4gICAgbWFyZ2luLWxlZnQ6IDIwcHg7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xyXG4gICAgcGFkZGluZzogMjBweDtcclxuICAgIGJvcmRlci1yYWRpdXM6IDhweDtcclxuICAgIGJveC1zaGFkb3c6IDAgMCAxMHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcclxufVxyXG4gIFxyXG4ucmVzZXJ2YXRpb24tZm9ybSBoMiB7XHJcbiAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgIzg1NjFhODtcclxuICAgIHBhZGRpbmctYm90dG9tOiA1cHg7XHJcbiAgICBjb2xvcjogIzg1NjFhODtcclxufVxyXG4gIFxyXG4uaW5wdXQtZmllbGQge1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMTVweDtcclxufVxyXG4gIFxyXG4uaW5wdXQtZmllbGQgbGFiZWwge1xyXG4gICAgZGlzcGxheTogYmxvY2s7XHJcbiAgICBtYXJnaW4tYm90dG9tOiA1cHg7XHJcbiAgICBmb250LXdlaWdodDogYm9sZDtcclxuICAgIGNvbG9yOiAjMzMzO1xyXG59XHJcbiAgXHJcbi5pbnB1dC1maWVsZCBzZWxlY3Qge1xyXG4gICAgd2lkdGg6IGNhbGMoMTAwJSAtIDEwcHgpO1xyXG4gICAgcGFkZGluZzogMTBweDtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XHJcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG59XHJcbiAgXHJcbi5idXR0b25zIHtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgIG1hcmdpbi10b3A6IDEwcHg7XHJcbn1cclxuICBcclxuLmJ1dHRvbnMgYnV0dG9uIHtcclxuICAgIGJhY2tncm91bmQ6ICM4NTYxYTg7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgICBib3JkZXI6IG5vbmU7XHJcbiAgICBwYWRkaW5nOiAxMHB4IDIwcHg7XHJcbiAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgICBtYXJnaW46IDVweDtcclxuICAgIGJvcmRlci1yYWRpdXM6IDRweDsgXHJcbn1cclxuICBcclxuLmJ1dHRvbnMgYnV0dG9uOmhvdmVyIHtcclxuICAgIGJhY2tncm91bmQ6ICM2NDQyN2E7IFxyXG59XHJcbiAgXHJcbkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1heC13aWR0aDogNzY4cHgpIHtcclxuICAgIC5jb250YWluZXIge1xyXG4gICAgICB3aWR0aDogOTAlO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgLmxheW91dC1jb250YWluZXIge1xyXG4gICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgLmJ1dHRvbnMgYnV0dG9uIHtcclxuICAgICAgcGFkZGluZzogOHB4IDE2cHg7XHJcbiAgICB9XHJcbiAgXHJcbiAgICAuY2FudmFzLWNvbnRhaW5lcixcclxuICAgIC5yZXNlcnZhdGlvbi1mb3JtIHtcclxuICAgICAgbWFyZ2luOiAwO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgLnJlc2VydmF0aW9uLWZvcm0ge1xyXG4gICAgICBtYXJnaW4tdG9wOiAyMHB4O1xyXG4gICAgfVxyXG59XHJcbiAgXHJcbkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1heC13aWR0aDogNTc2cHgpIHtcclxuICAgIC5jb250YWluZXIge1xyXG4gICAgICBwYWRkaW5nOiAxNXB4O1xyXG4gICAgfVxyXG4gIFxyXG4gICAgLmJ1dHRvbnMge1xyXG4gICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICBmbGV4LXdyYXA6IHdyYXA7XHJcbiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgLmJ1dHRvbnMgYnV0dG9uIHtcclxuICAgICAgbWFyZ2luOiA1cHg7XHJcbiAgICB9XHJcbn1cclxuICAiXSwic291cmNlUm9vdCI6IiJ9 */\"]\n  });\n}","map":{"version":3,"names":["lastValueFrom","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵproperty","sto_r2","id","ɵɵadvance","ɵɵtextInterpolate2","brojMesta","LayoutComponent","constructor","http","restoranService","restoran","zauzetiStolovi","slobodniStolovi","rezervacija","odgovarajuciStolovi","selectedStoId","message","success","ngOnInit","_this","_asyncToGenerator","rez","localStorage","getItem","JSON","parse","rezultat","getLayoutForRestoran","forEach","sto","brojGostiju","push","ctx","canvas","nativeElement","getContext","drawLayout","error","console","log","clearRect","width","height","canvasWidth","canvasHeight","radius","kitchenWidth","kitchenHeight","toiletWidth","toiletHeight","minX","Math","min","map","table","x","kitchen","toilets","minY","y","maxX","max","maxY","shiftX","shiftY","adjustPosition","centerX","centerY","beginPath","arc","PI","fillStyle","fill","strokeStyle","lineWidth","stroke","closePath","textAlign","textBaseline","fillText","kitchenPos","fillRect","strokeRect","toiletPos","potvrdiRezervaciju","_","ɵɵdirectiveInject","i1","HttpClient","i2","RestoranService","_2","selectors","viewQuery","LayoutComponent_Query","rf","ɵɵelement","ɵɵlistener","LayoutComponent_Template_select_ngModelChange_15_listener","$event","ɵɵtemplate","LayoutComponent_option_16_Template","LayoutComponent_Template_button_click_18_listener","ɵɵtextInterpolate1","gost","ɵɵtextInterpolate"],"sources":["C:\\Users\\Perovic\\Desktop\\PIA\\front\\src\\app\\layout\\layout.component.ts","C:\\Users\\Perovic\\Desktop\\PIA\\front\\src\\app\\layout\\layout.component.html"],"sourcesContent":["import { Component, Input, OnInit, ViewChild, ElementRef } from '@angular/core';\nimport { LayoutResponse } from '../models/LayoutResponse';\nimport { HttpClient } from '@angular/common/http';\nimport { RestoranService } from '../services/restoran.service';\nimport { restoran } from '../models/restoran';\nimport { sto } from '../models/sto';\nimport { rezervacija } from '../models/rezervacija';\nimport { last, lastValueFrom } from 'rxjs';\n\n@Component({\n  selector: 'app-layout',\n  templateUrl: './layout.component.html',\n  styleUrls: ['./layout.component.css']\n})\nexport class LayoutComponent implements OnInit {\n  \n  @Input() layoutData: any; \n  @ViewChild('canvas', { static: true }) canvas: ElementRef<HTMLCanvasElement>;\n  private ctx: CanvasRenderingContext2D;\n  restoran: restoran = null;\n  zauzetiStolovi: sto[] = [];\n  slobodniStolovi: sto[] = [];\n  rezervacija: rezervacija = null;\n  odgovarajuciStolovi: sto[] = [];\n  selectedStoId: number = -1;\n  message: string = \"\";\n  success: string = \"\";\n  constructor(private http: HttpClient, private restoranService: RestoranService) {}\n\n  \n  async ngOnInit(){\n    try{\n      this.success = \"\";\n      this.selectedStoId = -1;\n      this.message = \"\";\n      let rez = localStorage.getItem('rezervacija')\n      if(rez != null) this.rezervacija = JSON.parse(rez);\n      let rezultat: any = await lastValueFrom(this.restoranService.getLayoutForRestoran(this.rezervacija))\n      this.restoran = rezultat.restoran;\n      this.zauzetiStolovi = rezultat.zauzetiStolovi;\n      this.slobodniStolovi = rezultat.slobodniStolovi;\n      this.slobodniStolovi.forEach(sto=>{\n        if(sto.brojMesta >= this.rezervacija.brojGostiju){\n          this.odgovarajuciStolovi.push(sto);\n        }\n      })\n      this.ctx  = this.canvas.nativeElement.getContext('2d');\n      this.drawLayout(this.restoran, this.slobodniStolovi, this.zauzetiStolovi);\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  private drawLayout(restoran: restoran, slobodniStolovi: sto[], zauzetiStolovi: sto[]): void {\n    this.ctx.clearRect(0, 0, this.canvas.nativeElement.width, this.canvas.nativeElement.height);\n\n    const canvasWidth = this.canvas.nativeElement.width;\n    const canvasHeight = this.canvas.nativeElement.height;\n    const radius = 25;\n    const kitchenWidth = 75;\n    const kitchenHeight = 200;\n    const toiletWidth = 75;\n    const toiletHeight = 75;\n    // Trazimo da li postoji element van kanvasa tako sto nadjemo minimum i maksimum X i Y koordinate\n    let minX = Math.min( \n        ...slobodniStolovi.map(table => table.x),\n        ...zauzetiStolovi.map(table => table.x),\n        restoran.kitchen.x,\n        restoran.toilets.x\n    );\n    let minY = Math.min(\n        ...slobodniStolovi.map(table => table.y),\n        ...zauzetiStolovi.map(table => table.y),\n        restoran.kitchen.y,\n        restoran.toilets.y\n    );\n    let maxX = Math.max(\n        ...slobodniStolovi.map(table => table.x + radius * 2),\n        ...zauzetiStolovi.map(table => table.x + radius * 2),\n        restoran.kitchen.x + kitchenWidth,\n        restoran.toilets.x + toiletWidth\n    );\n    let maxY = Math.max(\n        ...slobodniStolovi.map(table => table.y + radius * 2),\n        ...zauzetiStolovi.map(table => table.y + radius * 2),\n        restoran.kitchen.y + kitchenHeight,\n        restoran.toilets.y + toiletHeight\n    );\n\n\n    let shiftX = 0;\n    let shiftY = 0;\n\n    if (minX < 0) { // Ukoliko je minimum X van kanvasa, pomeramo ga za minX u desno\n        shiftX = -minX;\n    } else if (maxX > canvasWidth) { // ukoliko je maximum X van kanvasa, pomeramo ga za razdaljinu ivice kanvasa do maximum X u levo\n        shiftX = canvasWidth - maxX;\n    }\n\n    if (minY < 0) { // ukoliko je minimum Y van kanvasa, pomeramo ga za minY na gore\n        shiftY = -minY; \n    } else if (maxY > canvasHeight) { // ukoliko je maximum Y van kanvasa, pomeramo ga za razdaljinu ivice kanvasa do maximum Y na dole\n        shiftY = canvasHeight - maxY;\n    }\n\n    const adjustPosition = (x: number, y: number) => { // funkcija za podesavanje koordinata\n        return { x: x + shiftX, y: y + shiftY };\n    };\n\n    slobodniStolovi.forEach(table => {\n        let { x, y } = adjustPosition(table.x, table.y); // ako je potrebno podesavanje, pomerimo sve\n        const centerX = x + radius;\n        const centerY = y + radius;\n\n        this.ctx.beginPath();\n        this.ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);\n        this.ctx.fillStyle = 'white';\n        this.ctx.fill();\n        this.ctx.strokeStyle = 'black';\n        this.ctx.lineWidth = 2;\n        this.ctx.stroke();\n        this.ctx.closePath();\n\n        this.ctx.fillStyle = 'black';\n        this.ctx.textAlign = 'center';\n        this.ctx.textBaseline = 'middle';\n        this.ctx.fillText(`Table ${table.id}`, centerX, centerY);\n    });\n\n    zauzetiStolovi.forEach(table => {\n        let { x, y } = adjustPosition(table.x, table.y); // ako je potrebno podesavanje, podesimo sve\n        const centerX = x + radius;\n        const centerY = y + radius;\n\n        this.ctx.beginPath();\n        this.ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);\n        this.ctx.fillStyle = 'red';\n        this.ctx.fill();\n        this.ctx.strokeStyle = 'black';\n        this.ctx.lineWidth = 2;\n        this.ctx.stroke();\n        this.ctx.closePath();\n\n        this.ctx.fillStyle = 'black';\n        this.ctx.textAlign = 'center';\n        this.ctx.textBaseline = 'middle';\n        this.ctx.fillText(`Table ${table.id}`, centerX, centerY);\n    });\n\n    let kitchenPos = adjustPosition(restoran.kitchen.x, restoran.kitchen.y); // ako je potrebno podesavanje, podesimo kuhinju\n    this.ctx.fillStyle = 'white';\n    this.ctx.fillRect(kitchenPos.x, kitchenPos.y, kitchenWidth, kitchenHeight);\n    this.ctx.strokeStyle = 'black';\n    this.ctx.lineWidth = 2;\n    this.ctx.strokeRect(kitchenPos.x, kitchenPos.y, kitchenWidth, kitchenHeight);\n    this.ctx.fillStyle = 'black';\n    this.ctx.textAlign = 'start';\n    this.ctx.textBaseline = 'top';\n    this.ctx.fillText('Kuhinja', kitchenPos.x + 5, kitchenPos.y + 5);\n\n    let toiletPos = adjustPosition(restoran.toilets.x, restoran.toilets.y); // ako je potrebno podesavanje, podesimo toalet\n    this.ctx.fillStyle = 'white';\n    this.ctx.fillRect(toiletPos.x, toiletPos.y, toiletWidth, toiletHeight);\n    this.ctx.strokeStyle = 'black';\n    this.ctx.lineWidth = 2;\n    this.ctx.strokeRect(toiletPos.x, toiletPos.y, toiletWidth, toiletHeight);\n    this.ctx.fillStyle = 'black';\n    this.ctx.textAlign = 'start';\n    this.ctx.textBaseline = 'top';\n    this.ctx.fillText('Toalet', toiletPos.x + 5, toiletPos.y + 5);\n  }\n\n  potvrdiRezervaciju(){\n    if(this.selectedStoId == -1) {\n      this.message = \"Niste odabrali sto!\";\n    } else {\n      this.message = \"\";\n\n    }\n  }\n}\n","<div class=\"container\">\n    <div class=\"layout-container\">\n      <div class=\"canvas-container\">\n        <canvas #canvas width=\"600\" height=\"500\"></canvas>\n      </div>\n      <div class=\"reservation-form\">\n        <h2>Informacije o rezervaciji</h2>\n        <p>Gost: {{rezervacija.gost}}</p>\n        <p>Broj gostiju: {{rezervacija.brojGostiju}}</p>\n        <div class=\"input-field\">\n          <label for=\"sto\">Odaberite sto:</label>\n          <select id=\"sto\" [(ngModel)]=\"selectedStoId\">\n            <option *ngFor=\"let sto of odgovarajuciStolovi\" [value]=\"sto.id\">Sto: {{sto.id}}, broj mesta za stolom: {{sto.brojMesta}}</option>\n          </select>\n        </div>\n        <div class=\"buttons\">\n          <button (click)=\"potvrdiRezervaciju()\">Potvrdi</button>\n          <span style=\"color: red;\">{{message}}</span>\n        </div>\n      </div>\n    </div>\n</div>\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}